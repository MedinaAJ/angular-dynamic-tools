<button [matMenuTriggerFor]="menu" class="mt-1" mat-icon-button>
  <ng-container *ngTemplateOutlet="flagImage; context: {$implicit: activeLang}"></ng-container>
</button>
<mat-menu #menu="matMenu" class="bg-white shadow border ">
  <button (click)="changeLanguage(lang.id)" *ngFor="let lang of availableLangs" mat-menu-item>
    <span class="flex items-center">
        <ng-container *ngTemplateOutlet="flagImage; context: {$implicit: lang.id}"></ng-container>
        <span class="ml-3 font-medium text-gray-800">{{lang.label}}</span>
    </span>
  </button>
</mat-menu>

<!-- Flag image template -->
<ng-template
  #flagImage
  let-lang>
    <span class="relative w-4 shadow rounded-sm overflow-hidden">
        <span class="absolute inset-0 ring-1 ring-inset ring-black ring-opacity-10"></span>
        <img
          [alt]="'Flag image for ' + lang"
          [src]="'assets/img/flags/' + lang.toUpperCase() + '.svg'"
          class="w-full">
    </span>
</ng-template>
